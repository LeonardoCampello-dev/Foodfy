{% extends "../layout.njk" %}

{% block content %}

<div class="form">
    
    <form action="/admin/recipes" method="POST">
    
        <div class="page-header">
            <h2>Criando receita</h2>

            <button type="submit" class="button">Salvar receita</button>
        </div>

        <div class="item">
            <div>Imagem da receita</div>
            
            <div class="photos-container">

                <div id="photos-upload">
                    <input 
                        type="file" 
                        name="photos" 
                        id="photos-input"
                        multiple
                        accept="images/*"
                        onchange="PhotosUpload.handleFileInput(event)"
                    >

                    <p>
                        <i class="material-icons">add_photo_alternate</i>
                    </p>
                </div>

                <div id="photos-preview"></div>

            </div>
        </div>

        <div class="item">
            <div>Título</div>
            
            <div>
                <input 
                    type="text" 
                    name="title" 
                    value="{{ recipe.title }}" 
                    placeholder="Ex: Triplo Bacon Burguer" 
                    required="required"
                >
            </div>
        </div>

        <div class="item">
            <div>Chef</div>
            <div>

                <select name="chef">
                    {% for chef in chefSelectOptions %}
                    <option value="{{ chef.id }}" 
                    {% if recipe.chef_id == chef.id %} 
                        selected 
                    {% endif %}> 
                    {{ chef.name }}
                    </option>                        
                    {% endfor %}
                </select>
                
            </div>
        </div>

        <div class="item" id="ingredients">
            <div>Ingredientes</div>
            
            <div class="ingredient">
                <input 
                    type="text" 
                    name="ingredients[]" 
                    value="{{ ingredient }}" 
                    required="required"
                >
            </div>
        </div>
        
        <a class="add-ingredient" onclick="Fields.addIngredient()">Adicionar novo ingrediente</a>

        <div class="item" id="preparations">
            <div>Modo de preparo</div>
            
            <div class="preparation">
                <input 
                    type="text" 
                    name="preparation[]" 
                    value="{{ step }}" 
                    required="required"
                >
            </div>
        </div>
        
        <a class="add-preparation" onclick="Fields.addPreparation()">Adicionar novo passo</a>

        <div class="item">
            <div>Informações adicionais</div>
            
            <div>
                <textarea name="information" cols="30" rows="10">{{ recipe.information }}</textarea>
            </div>
        </div>
        
    </form>
    
</div>

{% endblock content %}